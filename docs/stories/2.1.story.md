# Story 2.1: Cross-Project Communication Setup

## Status
Draft

## Story
**As a** full-stack developer working with two separate projects,
**I want** to establish reliable communication between the external Lovable frontend and internal NestJS backend,
**so that** both projects can work together as a unified application while maintaining their independent development capabilities.

## Acceptance Criteria
1. Frontend can successfully make HTTP requests to backend
2. CORS errors are resolved between the two projects
3. Health check endpoint accessible from frontend via `/api/health`
4. Both projects can be started independently and work together
5. Development documentation updated for dual-project setup

## Tasks / Subtasks
- [ ] Configure CORS in backend to accept frontend requests (AC: 1, 2)
  - [ ] Update CORS configuration in `waitlist-backend/src/config/cors.config.ts`
  - [ ] Modify environment variable `CORS_ORIGIN` to include `http://localhost:8080`
  - [ ] Test CORS configuration allows preflight OPTIONS requests
  - [ ] Verify backend accepts requests from frontend origin
- [ ] Set up API proxy in frontend Vite configuration (AC: 1, 3)
  - [ ] Modify `front/listly-ease/vite.config.ts` to add proxy configuration
  - [ ] Configure `/api/*` routes to proxy to `http://localhost:3001`
  - [ ] Test proxy routing works correctly
  - [ ] Verify frontend can access backend endpoints via `/api` prefix
- [ ] Implement connectivity test and verification (AC: 3, 4)
  - [ ] Create test API call in frontend to verify backend connectivity
  - [ ] Test health endpoint accessibility via `/api/health` from frontend
  - [ ] Verify both projects can start independently
  - [ ] Test that projects work together when both are running
- [ ] Create development workflow documentation (AC: 5)
  - [ ] Document dual-project startup procedure
  - [ ] Create development setup instructions
  - [ ] Document troubleshooting steps for connectivity issues
  - [ ] Add port configuration and proxy setup documentation

## Dev Notes

### Previous Story Insights
From Story 1.5 (Error Handling) completion:
- Backend infrastructure is complete with comprehensive error handling
- Global exception filters and validation pipes are implemented
- Health endpoints are functional and tested
- CORS configuration exists but needs updating for frontend integration

### Cross-Project Integration Context
**Frontend Project** (`front/listly-ease/`):
- Built with Lovable platform using React, TypeScript, Vite
- Currently runs on port 8080 with development server
- Has placeholder API calls that need to connect to real backend
- Uses shadcn/ui components and Tailwind CSS for styling

**Backend Project** (`waitlist-backend/`):
- Built with NestJS, TypeScript, MongoDB using internal development process
- Currently runs on port 3001 with complete infrastructure
- Has health endpoint at `/health` ready for testing
- CORS configuration exists but needs frontend origin added

### API Communication Architecture
[Source: docs/frontend-backend-integration-epic.md#integration-requirements]
- Frontend (`localhost:8080`) â†’ Backend (`localhost:3001`)
- API proxy configuration in Vite to route `/api/*` calls to backend
- CORS configuration in backend to accept requests from frontend origin
- Shared data contracts between frontend expectations and backend responses

### Backend Configuration Details
[Source: docs/architecture/3-technology-stack-backend.md]
- **Framework**: NestJS with TypeScript
- **API Base**: All APIs use RESTful JSON with base URL `/api/v1/`
- **Error Handling**: Global exception filters implemented for consistent responses
- **Validation**: Class-validator for automatic request payload validation

### Frontend Technology Stack
[Source: docs/front-end-architecture.md#technology-stack-recommendation]
- **Framework**: Built with Lovable (React-based)
- **Build Tool**: Vite with hot module replacement
- **Styling**: Tailwind CSS with component-level encapsulation
- **Development**: Fast development server with proxy capabilities

### File Locations
Based on existing project structure:
- Backend CORS config: `waitlist-backend/src/config/cors.config.ts`
- Backend environment: `waitlist-backend/.env`
- Frontend Vite config: `front/listly-ease/vite.config.ts`
- Health endpoint: Available at `waitlist-backend/src/modules/health/health.controller.ts`

### Integration Requirements
[Source: docs/frontend-backend-integration-epic.md#technical-requirements]
**Frontend Changes:**
- Vite proxy configuration to route `/api/*` to `http://localhost:3001`
- Environment variables for backend URL configuration
- Test connectivity calls to verify communication

**Backend Changes:**
- CORS configuration to accept requests from `http://localhost:8080`
- Ensure existing health endpoints remain accessible
- Maintain compatibility with existing middleware stack

### Testing Standards

**Unit Testing Requirements:**
- Backend configuration changes should include unit tests
- Frontend proxy configuration should be tested
- Health endpoint integration should be verified

**Integration Testing:**
- Cross-origin request testing between projects
- End-to-end connectivity verification
- Dual-project startup and communication testing

**Test File Locations:**
- Backend tests alongside configuration files (`.spec.ts` pattern)
- Frontend tests follow existing Vite testing patterns
- Integration tests may require both projects running simultaneously

**Testing Frameworks:**
- Backend: Jest (already configured for NestJS)
- Frontend: Vite testing utilities
- Integration: Manual verification and automated connectivity tests

### Technical Constraints
- Both projects must remain independently developable and deployable
- Existing backend infrastructure (Stories 1.1-1.5) must remain unchanged
- Frontend UI components require no changes for connectivity setup
- CORS configuration must not break existing functionality
- Development workflow must support both projects running simultaneously

### Performance Considerations
- API proxy should add minimal latency to requests
- CORS preflight requests should be handled efficiently
- Health check endpoint should respond quickly for connectivity verification
- Both development servers should start without conflicts

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-30 | 1.0 | Initial story creation | Scrum Master |

## Dev Agent Record

### Agent Model Used
{{agent_model_name_version}}

### Debug Log References
{{debug_log_references}}

### Completion Notes List
{{completion_notes}}

### File List
{{file_list}}

## QA Results
{{qa_results}}